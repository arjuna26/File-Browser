# HTTP Server with Basic Authentication and Ngrok Tunneling

In this project, I used the first idea that came into my head on how to view files from my Windows PC on my iPhone. I wanted something simple, but also something that would teach me how to use a new python library. So, below I will explain the idea that first came to mind and how I implemented it. This README also serves as a guide to using this project and setting up the neccesary tools.

## Overview
* Used Python's http.server library to create HTTP server
* Generated .pem key files using [OpenSSL](https://www.openssl.org/)
* Created a config file to store the password and username, hidden from version control.
* Used base64 encoding to encode/decode credentials.
* Exposed the local server to the internet using [Ngrok](https://ngrok.com/) for access from any device.

## Setting Up the HTTP Server

### http.server Library

The server uses Python's `http.server` module to handle HTTP requests. To implement basic authentication, we create a subclass of `SimpleHTTPRequestHandler` that checks for credentials in the `Authorization` header of incoming requests. The user will be prompted for a username and password in a default popup window. 

```python
class AuthHandler(SimpleHTTPRequestHandler):
...
auth_header = self.headers.get('Authorization') 
```

To ensure secure communication, the server uses SSL. The SSL context is configured and applied to the HTTP server's socket using [OpenSSL](https://www.openssl.org/):

```python
context.load_cert_chain(certfile='.certificate.pem', keyfile='.key.pem') 
```

The .pem files you see there are generated by OpenSSL, which will be explained below

### Generating .pem Files with OpenSSL

OpenSSL is a powerful toolkit for the Transport Layer Security (TLS) and Secure Sockets Layer (SSL) protocols, as well as a general-purpose cryptography library. It can generate various types of cryptographic files, including `.pem` files, which are commonly used for SSL certificates and private keys.

Here are the basic steps to generate `.pem` files using OpenSSL:

**Generate a Private Key:**

```sh
openssl genpkey -algorithm RSA -out private_key.pem -aes256
```

This command generates a private key using the RSA algorithm and saves it to private_key.pem. The -aes256 option encrypts the key with AES-256.

**Generate a Self-Signed Certificate:**

```sh
openssl req -x509 -key private_key.pem -in csr.pem -out certificate.pem -days 365
```

This command creates a self-signed certificate valid for 365 days using the CSR

Next, I will explain how I set up Ngrok.

## Ngrok Configuration Guide

### HTTPS Tunneling

Ngrok is a tool that creates secure tunnels to localhost, exposing local servers behind NATs and firewalls to the public internet over secure tunnels. When you run Ngrok, it creates a secure tunnel to your local server, allowing external users to access your local web server securely. Ngrok encrypts all traffic over the tunnel using TLS/SSL, making it secure against eavesdropping and tampering.

### Setting up an Ngrok Account and Creating a Free Domain

To use Ngrok, you need to sign up for an account on the Ngrok website. Follow these steps:

1. Go to [Ngrok](https://ngrok.com/) and sign up for an account.
2. After signing up, log in to your Ngrok account.
3. Once logged in, you can create a permanent domain by going to the [Domains](https://dashboard.ngrok.com/cloud-edge/domains) section of your Ngrok dashboard. Follow the instructions to set up your free domain.

## Credentials

### Creating config.py

To set up your credentials and the command to start the ngrok tunnel, you can create a `config.py` file in the same repository as the provided code. Here's how to create the `config.py` file:

1. Create a new file named `config.py` in your repository.
2. Add the following content to `config.py`:

```python
# config.py

NGROK_COMMAND = [
    "ngrok", "http", "--scheme=https", "https://localhost:5000",
    "--domain=your-free-domain.ngrok.io"
]

USERNAME = ' '
PASSWORD = ' '
```

Don't forget to replace `your-free-domain.ngrok.io` with your Ngrok domain obtained above. Note this ngrok tunnel will be redirecting requests from `localhost:5000`, feel free to change the port as needed.

## Summary

Overall, I learned how the http.server library in Python works, which may come in handy as I am enjoying building web apps and now I know how to serve them to the internet. It was really cool seeing files from my computer on my phone through a simple localhost server! 
